---
name: founder-tenant-seed-prd
version: 1.0
date: 2025-08-12
status: Draft
owner: PM
source: Plans/product-roadmap.md (M0 Founder Instance); Input/business-plan-v2.md
milestone: M0 (2.1.1.1)
---

<a id="sec-1"></a>
## 1. Executive Summary

Seed a single canonical "Founder" tenant and an "Admin" user via an idempotent mechanism so downstream M0 features (auth, rules, journal, analytics) have a stable starting state. Ensure no plaintext secrets are committed, seeding is repeatable, and aligns with the future multi‑tenant model (shared schema with strict `tenant_id`).

<a id="sec-2"></a>
## 2. Scope
- In scope:
  - Create canonical records: `tenant: Founder` and `user: Admin` with deterministic IDs.
  - Idempotent seed (safe to run repeatedly without duplicates).
  - Interim storage decision (by CTO): JSON/localStorage for demo/dev or DB migration after infra baseline (2.1.1.3).
  - Secrets handling (env vars) and scan evidence (no High/Critical) for this scope.
- Out of scope:
  - Full Auth flows (handled in 2.1.1.4) and UI admin panel (M2).
  - Self‑service tenant onboarding (M2 2.3.1.x).

<a id="sec-3"></a>
## 3. Success Criteria
- One and only one Founder tenant exists after any number of seed runs.
- Admin user present with role=admin; no plaintext credentials in repo.
- Seed completes in ≤3s on a typical dev machine.
- Security scans (deps, SAST, secrets, SBOM) report no High/Critical.

<a id="sec-4"></a>
## 4. User Stories
- As the platform, I need a default Founder tenant so I can configure and test core features in M0 without onboarding flows.
- As an operator, I need an Admin user bound to the Founder tenant so I can authenticate once Auth (2.1.1.4) is enabled.

<a id="sec-5"></a>
## 5. Functional Requirements
1. Create or confirm `tenant_id` for "Founder"; stable/deterministic value.
2. Create or confirm `user_id` for "Admin"; assign `role=admin`, `tenant_id=Founder`.
3. Idempotency: repeated seed operations do not duplicate rows/records.
4. Credentials: use env‑provided initial secret or "set-on-first-login" token. Never commit plaintext passwords.
5. Observability: output a simple verification log/echo after seed.

<a id="sec-6"></a>
## 6. Technical Requirements

<a id="sec-6-1"></a>
### 6.1 Architecture
- Minimal, reversible seeding entry point. Prefer a thin script or migration with guard checks.
- Align identifiers and fields with future multi‑tenancy (2.3.1.1): `tenant_id`, `user_id`, `role`, `created_at`.

<a id="sec-6-2"></a>
### 6.2 Data Model
- Tenant: `{ tenant_id (pk), name, created_at }`
- User: `{ user_id (pk), tenant_id (fk), email, role, password_hash|first_login_token, created_at }`

<a id="sec-6-3"></a>
### 6.3 Storage/Schema
- Interim (if chosen): local JSON or `localStorage` keys under `etc_*` namespace with a documented migration path to DB.
- DB path (post‑2.1.1.3): Prisma migration creating both rows with unique constraints to enforce idempotency.

<a id="sec-6-4"></a>
### 6.4 Validation
- Enforce unique tenant name for Founder; unique admin email.
- Validate presence of required envs when seeding credentials.

<a id="sec-6-5"></a>
### 6.5 UI/UX
- N/A for seeding. If any visible confirmation is added, include non‑advisory copy and simple labels. UX to confirm texts.

<a id="sec-6-6"></a>
### 6.6 Legal/Privacy
- Ensure no PII beyond admin email is stored in plaintext. Include standard "educational only" if any UI stub is shown.

<a id="sec-7"></a>
## 7. Testing & Acceptance

<a id="sec-7-1"></a>
### 7.1 Test Scenarios
1. First run creates Founder tenant and Admin user; reports success.
2. Second run is a no‑op (idempotent); no duplicates.
3. Missing required envs → graceful failure with actionable message.
4. Security spot‑check: repository contains no plaintext admin secrets.

<a id="sec-7-2"></a>
### 7.2 Acceptance Criteria
- All scenarios above pass on macOS latest with Node LTS.
- Overall Status: Pass in QA results.
- Security evidence attached; no High/Critical outstanding.

<a id="sec-7-3"></a>
### 7.3 QA Artifacts
- Test cases file: `QA/2.1.1.1-founder-tenant-seed/test-cases.md`
- Latest results: `QA/2.1.1.1-founder-tenant-seed/test-results-<yyyy-mm-dd>.md` (Overall Status: Pass required)

<a id="sec-8"></a>
## 8. Changelog
- v1.0: Initial draft and QA scaffold created.

<a id="sec-9"></a>
## 9. Collaboration & Review Workflow

<a id="sec-9-1"></a>
### 9.1 Roles and Order
- PM → VP-Product → Technical Product Manager → CTO → Security → UX/UI → Legal → QA → VP‑Eng → Implementation Owner

<a id="sec-9-2"></a>
### 9.2 Where Communication Happens
- Primary: this PRD (`PRDs/M0/2.1.1.1-founder-tenant-seed-prd.md`)
- Status: `Plans/product-roadmap.md` (2.1.1.1)

<a id="sec-9-3"></a>
### 9.3 Handoff Contracts (Inputs → Outputs)
- PM: Input strategy → Output scope, user stories, acceptance
- VP-Product: Input PM → Output KPIs/gates
- Technical Product Manager: Input PM/VP-Product → Output specs/API contracts & constraints; acceptance tests links
- CTO: Input PM/VP-Product → Output tech constraints/defaults
- Security: Input PM/CTO → Output threat model/controls; scans plan
- UX: Input PM/CTO → Output copy/labels if any UI stub
- Legal: Input UX/CTO → Output approved disclaimer/privacy
- QA: Input PM/CTO/UX → Output test scenarios/acceptance checklist
- VP‑Eng: Input all → Output feasibility/sequencing (Ready)
- Implementation Owner: Input all → Output implementation plan + rollback note

<a id="sec-9-4"></a>
### 9.4 Review Log & Sign‑offs
- [x] PM — Scope/user stories/acceptance confirmed
- [x] VP-Product — Business alignment/KPIs confirmed
- [x] Technical Product Manager — Specs/API contracts & constraints confirmed; §10 links to specs/tests
- [x] CTO — Tech constraints/defaults confirmed
- [x] Security — Threat model/controls; scans attached; no High/Critical
- [x] UX — UX notes/labels/error states confirmed (or N/A)
- [x] Legal — Disclaimer/privacy approved (or N/A)
- [x] QA — Test scenarios/acceptance confirmed; results published at: `QA/2.1.1.1-founder-tenant-seed/test-results-2025-08-12.md` (Overall Status: Pass)
- [x] VP‑Eng — Feasibility/sequencing confirmed (Ready)
- [x] Implementation Owner — Implementation risks and rollback plan confirmed

<a id="sec-9-5"></a>
### 9.5 Reviewer Notes

<a id="sec-9-6"></a>
### 9.6 Decision Log
1) 2025-08-12 — Seed implemented via `js/core/seed.esm.js`, wired in `js/app-entry.js`. QA E2E passed; roadmap status flipped. — Owner: Implementation

<a id="sec-9-7"></a>
### 9.7 Open Questions
- CTO: Interim (local JSON/localStorage) vs DB migration path for initial seed?
- Admin credential bootstrap: env‑driven hash vs first‑login token?

<a id="sec-9-8"></a>
### 9.8 Ready‑to‑Implement Gate
- Condition: All boxes checked in 9.4 AND QA results published with Overall Status: Pass and linked above.
- Action: Flip status in roadmap and start implementation; mirror HTML.

<a id="sec-10"></a>
## 10. Excellence Checklist (link evidence per `docs/Excellence-Standard.md`)
- [ ] Scope/intent clear; dependencies and order documented
- [ ] Minimal, reversible edits; rollback steps noted in 9.6 (if risk > low)
- [ ] Lints/build/unit/integration/E2E green (as applicable)
- [ ] QA results published and linked: `QA/2.1.1.1-founder-tenant-seed/test-results-<yyyy-mm-dd>.md` (Overall Status: Pass)
- [ ] Security evidence linked (secrets, deps, SAST, SBOM; DAST if applicable) — no High/Critical outstanding
- [ ] Performance/size budgets respected; evidence attached if relevant
- [ ] Roadmap + `docs/product-roadmap.html` updated in same change; links verified clickable
- [ ] Token‑efficient summary and diffs; no redundant docs or dead code


